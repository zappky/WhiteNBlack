@{
    ViewBag.Title = "PopUp";
}

@model SmokeFreeApplication.Models.BroadcastMessage

<title>@ViewBag.Title</title>

<div class="container">

    @if (Request.Cookies["popup"].Value == "true")
    {
        <button type="button" class="btn btn-info btn-sm" data-target="#MyModal" data-toggle="modal"> Announcement</button>
    }
    else
    {
        //just keeping this for debug
        //<button type="button" class="btn btn-info btn-sm" data-target="#MyModal" data-toggle="modal"> Disppeared</button>
    }

    <div class="modal" id="MyModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>@Html.DisplayFor(modelItem => Model.title)</h4>
                    <button class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>@Html.DisplayFor(modelItem => Model.content)</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-dismiss="modal">close</button>
                    <button class="btn btn-secondary" data-dismiss="modal" onclick="NeverPopupAgain()">Never Show Again</button>
                </div>

            </div>
        </div>
    </div>
</div>

<script type='text/javascript'>
    function NeverPopupAgain() {
        document.cookie = "popup=false";
        //var cookie = '@HttpContext.Current.Request.Cookies["popup"].Value';
        //alert(cookie);
    }
</script>